<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--Ноды "Наименование" и "TAG_NAME_PLC" должны присутствовать в каждой ноде "EXEL", "Диапазон_мин" и "Диапазон_макс" - во всех аналоговых--><ConfigSignals>
<AI Comment="Аналоговые входы. Архив: _ToHMI;" excelSheetName="AI" linkTable="ANB" srcCol="TAG_NAME_PLC" trgCol="TAG_NAME_AnPar">
<EXEL>
<F nameColumnPos="Наименование"/>
<!--Обязательный нода Русское нгазванеие-->
<P childTable="SetPoints" cildCol="TAG_NAME_AnPar" nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/>
<!--Обязательный нода-->
<G default="0.0" fRez="" nameColumnPos="Диапазон_мин" type="Number"/>
<!--Обязательный нода-->
<H default="100.0" fRez="" nameColumnPos="Диапазон_макс" type="Number"/>
<!--Обязательный нода-->
<J default="KM04_4_20mA" nameColumnPos="Тип_датчика"/>
<T default="2" nameColumnPos="Точность" type="Int"/>
<!--кол знаков после запятой-->
<U default="2.0" nameColumnPos="АЦПmin" swt="Тип_датчика">
<case def="-0.02" val="KM04_0_20mA"/>
<case def="0.0" val="KM04_4_20mA"/>
<case def="0.0" val="Siemens"/>
<case def="11773.0" val="Sonet"/>
<case def="-45.0" val="ТХА"/>
<case def="-60.0" val="100М"/>
<case def="-60.0" val="100П"/>
<case def="-50.0" val="100Pt"/>
<case def="2.0" val="4-20 мА"/>
</U>
<V default="10.0" nameColumnPos="АЦПmax" swt="Тип_датчика">
<case def="9.9" val="KM04_0_20mA"/>
<case def="10.0" val="KM04_4_20mA"/>
<case def="27648.0" val="Siemens"/>
<case def="59714.0" val="Sonet"/>
<case def="820.0" val="ТХА"/>
<case def="150.0" val="100М"/>
<case def="180.0" val="100П"/>
<case def="150.0" val="100Pt"/>
<case def="10.0" val="4-20 мА"/>
</V>
<W formula="loLimF" nameColumnPos="loLim" type="Number"/>
<!-- нижний уровень зашкала -->
<X formula="hiLimF" nameColumnPos="hiLim" type="Number"/>
<!-- верхний уровень зашкала -->
<Y formula="loBrkF" nameColumnPos="loBrk" type="Number"/>
<!-- нижний уровень обрыв -->
<Z formula="hiBrkF" nameColumnPos="hiBrk" type="Number"/>
<!-- верхний уровень обрыв -->
<AA default="0.0" nameColumnPos="ROC" type="Number"/>
<AB default="1.0" nameColumnPos="recoveryTime" type="Number"/>
<!-- время выхода из ремота (ДУ) -->
<AC default="1.0" nameColumnPos="tau" type="Number"/>
<!-- степень сглаживания при обработке входного сигнала -->
<I default="" nameColumnPos="Единица_измерения"/>
<!-- не используется при генерации -->
<K default="" nameColumnPos="Акт_пас"/>
<!-- не используется при генерации -->
<L default="" nameColumnPos="Адрес_1"/>
<!-- не используется при генерации -->
<M default="" nameColumnPos="Адрес_2"/>
<!-- не используется при генерации -->
<N default="" nameColumnPos="Адрес_3"/>
<!-- не используется при генерации -->
<Q nameColumnPos="Устройство" type="Int"/>	<!-- используются в драйвере -->
<R nameColumnPos="Слот" type="Int"/>		<!-- используются в драйвере -->
<S nameColumnPos="Канал" type="Int"/>		<!-- используются в драйвере -->
<O default="" nameColumnPos="Примечание"/>
<!-- не используется при генерации -->
<AD default="" nameColumnPos="sonetModbus"/>
<!-- используется для генерации хардваре -->
<AE dictionary="SmallName.xml" nameColumnPos="SmallName" sourceCol="TAG_NAME_PLC"/>
<!-- используется при генерации листа мнемосхемы-->
</EXEL>
<Formulas>
<max column="Диапазон_макс" operation="get"/>
<min column="Диапазон_мин" operation="get"/>
<range operand1="max" operand2="min" operation="-"/>
<range1proc operand1="range" operand2="100" operation="/"/>
<range3proc operand1="range1proc" operand2="3" operation="*"/>
<range6proc operand1="range1proc" operand2="6" operation="*"/>
<loLimF operand1="min" operand2="range3proc" operation="-"/>
<hiLimF operand1="max" operand2="range3proc" operation="+"/>
<loBrkF operand1="min" operand2="range6proc" operation="-"/>
<hiBrkF operand1="max" operand2="range6proc" operation="+"/>
</Formulas>
<GenData>
<AI_DRV Type="REAL">
<!--AI_DRV - превращается в тип T_GPA_AI_DRV, где каждлое поле типа REAL -->
<globData name="AI_DRV">
<localData int="_Algorithm.int"/>
</globData>
</AI_DRV>
<AI_FromHMI>
<!--AI_FromHMI - превращается в тип T_GPA_AI_FromHMI, где каждлое поле типа T_AI_FromHMI -->
<globData name="AI_FromHMI">
<localData int="_Algorithm.int"/>
</globData>
</AI_FromHMI>
<AI_ToHMI>
<globData name="AI_ToHMI">
<localData int="_Algorithm.int"/>
</globData>
</AI_ToHMI>
<AI_Settings>
<globData>
<localData int="_Algorithm.int" multyAb="true" name="AI_Settings"/>
</globData>
</AI_Settings>
<AI_Internal>
<globData>
<localData int="_Algorithm.int" name="AI_Internal"/>
</globData>
</AI_Internal>
</GenData>
<GenCode>
<File src="Call_AI" target="_Algorithm">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода AI_init">
<Function name="AI_init">
<!-- AI_init(-->
<arg>
<abonent/>
<text t="_AI_Settings."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<!-- GPA_AI_Settings.Pmsm,-->
<arg>
<text t=" "/>
<dbd t="Диапазон_мин"/>
</arg>
<arg>
<text t=" "/>
<dbd t="Диапазон_макс"/>
</arg>
<arg>
<text t=" "/>
<dbd t="АЦПmin"/>
</arg>
<arg>
<text t=" "/>
<dbd t="АЦПmax"/>
</arg>
<arg>
<text t=" "/>
<dbd t="loLim"/>
</arg>
<arg>
<text t=" "/>
<dbd t="hiLim"/>
</arg>
<arg>
<text t=" "/>
<dbd t="loBrk"/>
</arg>
<arg>
<text t=" "/>
<dbd t="hiBrk"/>
</arg>
<arg>
<text t=" "/>
<dbd t="ROC"/>
</arg>
<arg>
<text t=" "/>
<dbd t="recoveryTime"/>
</arg>
<arg>
<text t=" "/>
<text t="repTime"/>
</arg>
<arg>
<text t=" "/>
<dbd t="tau"/>
</arg>
<arg>
<text t=" "/>
<npp/>
</arg>
<!--номер по порядку-->
</Function>
</Block>
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода AI_Processing">
<Function name="AI_Processing">
<arg>
<abonent/>
<text t="_AI_DRV."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AI_Settings."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AI_FromHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AI_ToHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AI_Internal."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" alg.AI_FLT"/>
</arg>
</Function>
</Block>
</File>
<!--		<File src="AI_Permit" target="_Algorithm">
<Block start="Начало сгенерированного кода AI_Permit" end="Конец сгенерированного кода">
<String>
<abonent/><text t="_AI_ToHMI."/><dbd t="TAG_NAME_PLC"/><text t=".manual := tmpPermit; //"/><dbd t="Наименование"/>
</String>
</Block>
</File> -->
<File src="Simulate_AI">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода">
<String>
<text t="str."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".BTNmanualOn := c;  str."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".BTNworkOn := not c; // "/>
<dbd t="Наименование"/>
</String>
</Block>
</File>
</GenCode>
<GenHW drvFile="_AI_DRV" globData="_AI_DRV" hwDriver="KM04"/>
</AI>
<FR_AI Comment="Входы ТР. Архив: _ToHMI;" excelSheetName="FR_AI">
<EXEL>
<F nameColumnPos="Наименование"/>
<!--Обязательный нода-->
<P childTable="SetPoints" cildCol="TAG_NAME_AnPar" nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/>
<G default="0.0" fRez="" nameColumnPos="Диапазон_мин" type="Number"/>
<H default="100.0" fRez="" nameColumnPos="Диапазон_макс" type="Number"/>
<J default="" nameColumnPos="Тип_датчика"/>
<T default="0" nameColumnPos="Точность" type="Int"/>
<U default="2.0" nameColumnPos="АЦПmin" swt="Тип_датчика">
<case def="-0.02" val="KM04_0_20mA"/>
<case def="0.0" val="KM04_4_20mA"/>
<case def="0.0" val="Siemens"/>
<case def="11773.0" val="Sonet"/>
<case def="-45.0" val="ТХА"/>
<case def="-60.0" val="100М"/>
<case def="-60.0" val="100П"/>
<case def="-50.0" val="100Pt"/>
<case def="2.0" val="4-20 мА"/>
</U>
<V default="10.0" nameColumnPos="АЦПmax" swt="Тип_датчика">
<case def="9.9" val="KM04_0_20mA"/>
<case def="10.0" val="KM04_4_20mA"/>
<case def="27648.0" val="Siemens"/>
<case def="59714.0" val="Sonet"/>
<case def="820.0" val="ТХА"/>
<case def="150.0" val="100М"/>
<case def="180.0" val="100П"/>
<case def="150.0" val="100Pt"/>
<case def="10.0" val="4-20 мА"/>
</V>
<W formula="loLimF" nameColumnPos="loLim" type="Number"/>
<X formula="hiLimF" nameColumnPos="hiLim" type="Number"/>
<Y formula="loBrkF" nameColumnPos="loBrk" type="Number"/>
<Z formula="hiBrkF" nameColumnPos="hiBrk" type="Number"/>
<AA default="0.0" nameColumnPos="ROC" type="Number"/>
<AB default="1.0" nameColumnPos="recoveryTime" type="Number"/>
<AC default="1.0" nameColumnPos="tau" type="Number"/>
<I default="об/мин" nameColumnPos="Единица_измерения"/>
<K default="" nameColumnPos="Акт_пас"/>
<L default="" nameColumnPos="Адрес_1"/>
<M default="" nameColumnPos="Адрес_2"/>
<N default="" nameColumnPos="Адрес_3"/>
<Q nameColumnPos="Устройство" type="Int"/>
<R nameColumnPos="Слот" type="Int"/>
<S nameColumnPos="Канал" type="Int"/>
<O default="" nameColumnPos="Примечание"/>
<AD default="" nameColumnPos="sonetModbus"/>
<AE dictionary="SmallName.xml" nameColumnPos="SmallName" sourceCol="TAG_NAME_PLC"/>
</EXEL>
<GenData>
<FR_AI_DRV Type="REAL">
<globData name="FR_AI_DRV">
<localData int="_GT_4RM.int"/>
</globData>
</FR_AI_DRV>
<FR_AI_FromHMI typeFile="T_AI_FromHMI.type">
<globData name="FR_AI_FromHMI">
<localData int="_GT_4RM.int"/>
</globData>
</FR_AI_FromHMI>
<FR_AI_ToHMI typeFile="T_AI_ToHMI.type">
<globData name="FR_AI_ToHMI">
<localData int="_GT_4RM.int"/>
</globData>
</FR_AI_ToHMI>
<FR_AI_Settings typeFile="T_AI_Settings.type">
<globData>
<localData int="_GT_4RM.int" name="FR_AI_Settings"/>
</globData>
</FR_AI_Settings>
<FR_AI_Internal typeFile="T_AI_Internal.type">
<globData>
<localData int="_GT_4RM.int" name="FR_AI_Internal"/>
</globData>
</FR_AI_Internal>
</GenData>
<GenCode>
<File src="FR_AI_CallAll" target="_GT_4RM">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода FR_AI_init">
<Function name="AI_init">
<arg>
<abonent/>
<text t="_FR_AI_Settings."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<dbd t="Диапазон_мин"/>
</arg>
<arg>
<text t=" "/>
<dbd t="Диапазон_макс"/>
</arg>
<arg>
<text t=" "/>
<dbd t="АЦПmin"/>
</arg>
<arg>
<text t=" "/>
<dbd t="АЦПmax"/>
</arg>
<arg>
<text t=" "/>
<dbd t="loLim"/>
</arg>
<arg>
<text t=" "/>
<dbd t="hiLim"/>
</arg>
<arg>
<text t=" "/>
<dbd t="loBrk"/>
</arg>
<arg>
<text t=" "/>
<dbd t="hiBrk"/>
</arg>
<arg>
<text t=" "/>
<dbd t="ROC"/>
</arg>
<arg>
<text t=" "/>
<dbd t="recoveryTime"/>
</arg>
<arg>
<text t=" "/>
<text t="repTime"/>
</arg>
<arg>
<text t=" "/>
<dbd t="tau"/>
</arg>
<arg>
<text t=" "/>
<npp/>
</arg>
</Function>
</Block>
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода FR_AI_Processing">
<Function name="AI_Processing">
<arg>
<abonent/>
<text t="_FR_AI_DRV."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_FR_AI_Settings."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_FR_AI_FromHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_FR_AI_ToHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_FR_AI_Internal."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" alg.AI_FLT"/>
</arg>
</Function>
</Block>
</File>
<!--		<File src="FR_AI_Permit" target="_GT_4RM">
<Block start="Начало сгенерированного кода FR_AI_Permit" end="Конец сгенерированного кода">
<String>
<abonent/><text t="_FR_AI_ToHMI."/><dbd t="TAG_NAME_PLC"/><text t=".manual := tmpPermit; //"/><dbd t="Наименование"/>
</String>
</Block>
</File> -->
<File src="Simulate_FR">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода">
<String>
<text t="str."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".BTNmanualOn := c;  str."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".BTNworkOn := not c; // "/>
<dbd t="Наименование"/>
</String>
</Block>
</File>
</GenCode>
<GenHW drvFile="_FR_AI_DRV" globData="_FR_AI_DRV" hwDriver="KM04"/>
</FR_AI>
<ANB Comment="Уставки аналоговых параметров" excelSheetName="ANB" parentTable="AI">
<GenData>
<T_ANB Type="BOOL"/>
<T_GPA_SP_Settings Type="T_SP_Settings"/>
</GenData>
<EXEL>
<B nameColumnPos="TAG_NAME_AnPar" type="VarName"/>
<C nameColumnPos="direct" registr="down" replace="true"> <!-- true или TRUE или > или БОЛЬШЕ преобразует в "больше" -->
<case from="&gt;" to="больше"/>
<case from="true" to="больше"/>
<case from="&lt;" to="меньше"/>
<case from="false" to="меньше"/>
</C>
<D nameColumnPos="Уставка" type="Number"/>
<E default="3.0" nameColumnPos="delay" type="Number"/>
<F default="У" nameColumnPos="тип" registr="up" replace="true">
<case from="U" to="У"/>
<case from="A" to="А"/>
<case from="P" to="П"/>
<case from="O" to="О"/>
</F>
<G default="0" nameColumnPos="defVal" type="Int"/> <!-- значение по умолчанию при неисправности аналового
0 - уставка в ложь, 1 - в истина, 2 - остаётся какой была -->
<H default="0.0" nameColumnPos="гистерезис" type="Number"/>
<I default="" nameColumnPos="TAG_NAME_PLC"/>
<!-- Если имя уставки пустое то TAG_NAME_AnPar_Uv1 -->
<!--/I-->
<J default="" nameColumnPos="Наименование"/>
<!-- concut="true"/-->
</EXEL>
</ANB>
<AO Comment="Аналоговые выходы" excelSheetName="AO">
<GenData>
<AO_DRV Type="REAL">
<globData name="AO_DRV">
<localData int="_Algorithm.int"/>
<localData int="_GT_4RM.int"/>
</globData>
<globData name="AO">
<localData int="_Algorithm.int"/>
<localData int="_GT_4RM.int"/>
</globData>
</AO_DRV>
<AO_FromHMI>
<globData name="AO_FromHMI">
<localData int="_Algorithm.int"/>
<localData int="_GT_4RM.int"/>
</globData>
</AO_FromHMI>
<AO_ToHMI>
<globData name="AO_ToHMI">
<localData int="_Algorithm.int"/>
<localData int="_GT_4RM.int"/>
</globData>
</AO_ToHMI>
<AO_Settings>
<globData>
<localData int="_Algorithm.int" name="AO_Settings"/>
<localData int="_GT_4RM.int" name="AO_Settings"/>
</globData>
</AO_Settings>
</GenData>
<EXEL>
<F nameColumnPos="Наименование"/>
<Q nameColumnPos="TAG_NAME_PLC" type="VarName"/>
<G nameColumnPos="Диапазон_мин" type="Number"/>
<H nameColumnPos="Диапазон_макс" type="Number"/>
<I default="" nameColumnPos="Единица_измерения"/>
<J nameColumnPos="АЦПмин"/>
<K nameColumnPos="АЦПмакс"/>
<M default="" nameColumnPos="Адрес_1"/>
<N default="" nameColumnPos="Адрес_2"/>
<O default="" nameColumnPos="Адрес_3"/>
<R nameColumnPos="Устройство" type="Int"/>
<S nameColumnPos="Слот" type="Int"/>
<T nameColumnPos="Канал" type="Int"/>
<U default="2" nameColumnPos="Точность" type="Int"/>
<V default="" nameColumnPos="sonetModbus"/>
<W dictionary="SmallName.xml" nameColumnPos="SmallName" sourceCol="TAG_NAME_PLC"/>
</EXEL>
<GenCode>
<File src="AO_CallAll" target="_Algorithm">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода AO_init">
<Function name="AO_init">
<arg>
<abonent/>
<text t="_AO_Settings."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0" t="Диапазон_мин"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0" t="Диапазон_макс"/>
</arg>
<arg>
<text t=" "/>
<dbd t="АЦПмин"/>
</arg>
<arg>
<text t=" "/>
<dbd t="АЦПмакс"/>
</arg>
<arg>
<text t=" "/>
<npp/>
</arg>
</Function>
</Block>
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода AO_Processing">
<Function name="AO_Processing">
<arg>
<abonent/>
<text t="_AO."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AO_Settings."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AO_FromHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AO_ToHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AO_DRV."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
</Function>
</Block>
</File>
<!--		<File src="AO_Permit" target="_Algorithm">
<Block start="Начало сгенерированного кода AO_Permit" end="Конец сгенерированного кода">
<String>
<abonent/><text t="_AO_ToHMI."/><dbd t="TAG_NAME_PLC"/><text t=".forsPermit := tmpPermit; //"/><dbd t="Наименование"/>
</String>
</Block>
</File> -->
<File src="Simulate_AO">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода">
<String>
<text t="str."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".forsPermit := c; // "/>
<dbd t="Наименование"/>
</String>
</Block>
</File>
</GenCode>
<GenHW drvFile="_AO_DRV" globData="_AO_DRV" hwDriver="KM04"/>
</AO>
<DI Comment="Дискретные входы" excelSheetName="DI">
<GenData>
<DI_DRV Type="BOOL">
<globData name="DI_DRV">
<localData int="_Algorithm.int"/>
</globData>
<globData name="DI">
<localData int="_Algorithm.int"/>
</globData>
</DI_DRV>
<DI_FromHMI>
<globData name="DI_FromHMI">
<localData int="_Algorithm.int"/>
</globData>
</DI_FromHMI>
<DI_ToHMI>
<globData name="DI_ToHMI">
<localData int="_Algorithm.int"/>
</globData>
</DI_ToHMI>
<DI_Settings>
<globData>
<localData int="_Algorithm.int" name="DI_Settings"/>
</globData>
</DI_Settings>
<DI_Internal>
<globData>
<localData int="_Algorithm.int" name="DI_Internal"/>
</globData>
</DI_Internal>
</GenData>
<EXEL>
<F nameColumnPos="Наименование"/>
<K nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/>
<G default="НО СК" nameColumnPos="Тип_сигнала"/>
<P default="false" nameColumnPos="Инверсия" type="bool"/>
<H default="" nameColumnPos="Адрес_1"/>
<I default="" nameColumnPos="Адрес_2"/>
<L nameColumnPos="Устройство" type="Int"/>
<M nameColumnPos="Слот" type="Int"/>
<N nameColumnPos="Канал" type="Int"/>
<O default="0.0" nameColumnPos="Задержка" type="Number"/>
<Q default="false" nameColumnPos="КЦД"/>
<J default="" nameColumnPos="Примечание"/>
<R default="" nameColumnPos="sonetModbus"/>
</EXEL>
<GenCode>
<File src="Call_DI" target="_Algorithm">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода DI_init">
<Function name="DI_init">
<arg>
<abonent/>
<text t="_DI_Settings."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<text t="repTime"/>
</arg>
<arg>
<text t=" "/>
<dbd t="Задержка"/>
</arg>
<!--arg><text t=" "/><dbd t="Инверсия"/></arg-->
<arg>
<IF cond="Инверсия" val="Да">
<text t=" "/>
<text t="true"/>
<ELSE>
<text t=" "/>
<text t="false"/>
</ELSE>
</IF>
</arg>
<arg>
<text t=" "/>
<npp/>
</arg>
</Function>
</Block>
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода DI_Processing">
<Function name="DI_Processing">
<arg>
<abonent/>
<text t="_DI_DRV."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<IF cond="КЦД" val="Да">
<text t="true"/>
<ELSE>
<text t="false"/>
</ELSE>
</IF>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DI_Settings."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DI_FromHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DI_ToHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DI_Internal."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
</Function>
</Block>
</File>
<!--		<File src="DI_Permit" target="_Algorithm">
<Block start="Начало сгенерированного кода DI_Permit" end="Конец сгенерированного кода">
<String>
<abonent/><text t="_DI_ToHMI."/><dbd t="TAG_NAME_PLC"/><text t=".manual := tmpPermit; //"/><dbd t="Наименование"/>
</String>
</Block>
</File> -->
<File src="Simulate_DI">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода">
<String>
<text t="str."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".BTNmanualOn := c;  str."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".BTNworkOn := not c; // "/>
<dbd t="Наименование"/>
</String>
</Block>
</File>
</GenCode>
<GenHW drvFile="_DI_DRV" globData="_DI_DRV" hwDriver="KM04"/>
</DI>
<DO Comment="Дискретные выходы" excelSheetName="DO">
<GenData>
<DO_DRV Type="BOOL">
<globData name="DO_DRV">
<localData int="_Algorithm.int"/>
</globData>
<globData name="DO">
<localData int="_Algorithm.int"/>
</globData>
</DO_DRV>
<DO_FromHMI>
<globData name="DO_FromHMI">
<localData int="_Algorithm.int"/>
</globData>
</DO_FromHMI>
<DO_ToHMI>
<globData name="DO_ToHMI">
<localData int="_Algorithm.int"/>
</globData>
</DO_ToHMI>
</GenData>
<EXEL>
<F nameColumnPos="Наименование"/>
<K nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/>
<G default="" nameColumnPos="Тип_сигнала"/>
<H default="" nameColumnPos="Адрес_1"/>
<I default="" nameColumnPos="Адрес_2"/>
<L nameColumnPos="Устройство" type="Int"/>
<M nameColumnPos="Слот" type="Int"/>
<N nameColumnPos="Канал" type="Int"/>
<P default="false" nameColumnPos="КЦУ"/>
<J default="" nameColumnPos="Примечание"/>
<O default="" nameColumnPos="sonetModbus"/>
</EXEL>
<GenCode>
<File src="Call_DO" target="_Algorithm">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода DO_Processing">
<Function name="DO_Processing">
<arg>
<abonent/>
<text t="_DO."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DO_FromHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DO_ToHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DO_DRV."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
</Function>
</Block>
</File>
<File src="DO_Permit" target="_Algorithm">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода DO_Permit">
<String>
<abonent/>
<text t="_DO_ToHMI."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".forsPermit := tmpPermit; //"/>
<dbd t="Наименование"/>
</String>
</Block>
</File>
</GenCode>
<GenHW drvFile="_DO_DRV" globData="_DO_DRV" hwDriver="KM04"/>
</DO>
<mb_AI Comment="Аналоговые входы. Архив: _ToHMI; Modbus: " excelSheetName="mb_AI">
<EXEL info="R1C2">
<B nameColumnPos="Наименование"/>
<!--Ноды "Наименование" и "TAG_NAME_PLC" должны присутствовать в каждой ноде "EXEL"-->
<C childTable="SetPoints" cildCol="TAG_NAME_AnPar" nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/>
<D default="0.0" fRez="" nameColumnPos="Диапазон_мин" type="Number"/>
<E default="100.0" fRez="" nameColumnPos="Диапазон_макс" type="Number"/>
<F default="" nameColumnPos="Единица_измерения"/>
<G default="2" nameColumnPos="Точность" type="Int"/>
<H default="" nameColumnPos="Примечание"/>
<I default="" nameColumnPos="tau" type="Number"/>
<J default="" nameColumnPos="доп_инфо"/>
<K formula="loLimF" nameColumnPos="loLim" type="Number"/>
<L formula="hiLimF" nameColumnPos="hiLim" type="Number"/>
<M formula="loBrkF" nameColumnPos="loBrk" type="Number"/>
<N formula="hiBrkF" nameColumnPos="hiBrk" type="Number"/>
<O default="ABCD" nameColumnPos="dataType"/>
<P default="" nameColumnPos="Set1" type="Number"/>
<Q default="" nameColumnPos="Set2" type="Number"/>
<R modbus="dataType" nameColumnPos="mbAddr" type="Int"/>
<S dictionary="SmallName.xml" nameColumnPos="SmallName" sourceCol="TAG_NAME_PLC"/>
</EXEL>
<Formulas>
<max column="Диапазон_макс" operation="get"/>
<min column="Диапазон_мин" operation="get"/>
<range operand1="max" operand2="min" operation="-"/>
<range1proc operand1="range" operand2="100" operation="/"/>
<range3proc operand1="range1proc" operand2="3" operation="*"/>
<range6proc operand1="range1proc" operand2="6" operation="*"/>
<loLimF operand1="min" operand2="range3proc" operation="-"/>
<hiLimF operand1="max" operand2="range3proc" operation="+"/>
<loBrkF operand1="min" operand2="range6proc" operation="-"/>
<hiBrkF operand1="max" operand2="range6proc" operation="+"/>
</Formulas>
<GenData>
<AI_DRV col="dataType" dictionary="ModbusFormat.xml" ifEmpty="REAL">
<globData name="AI_DRV">
<localData int="_Algorithm.int"/>
</globData>
</AI_DRV>
<AI_FromHMI notGenTyps="WORD, ABCDEFGH" typeFile="T_AI_FromHMI.type">
<globData name="AI_FromHMI">
<localData int="_Algorithm.int"/>
</globData>
</AI_FromHMI>
<AI_ToHMI notGenTyps="WORD, ABCDEFGH" typeFile="T_AI_ToHMI.type">
<globData name="AI_ToHMI">
<localData int="_Algorithm.int"/>
</globData>
</AI_ToHMI>
<AI_Settings notGenTyps="WORD, ABCDEFGH">
<globData>
<localData int="_Algorithm.int" name="AI_Settings"/>
</globData>
</AI_Settings>
</GenData>
<GenCode>
<File src="mb_AI_CallAll" target="_Algorithm">
<Block end="Конец сгенерированного кода" notGenTyps="WORD, ABCDEFGH" start="Начало сгенерированного кода AI_init">
<Function name="mb_AI_init">
<arg>
<abonent/>
<text t="_AI_Settings."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0" t="Диапазон_мин"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0" t="Диапазон_макс"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0.0" t="loLim"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0.0" t="hiLim"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0.0" t="loBrk"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0.0" t="hiBrk"/>
</arg>
<arg>
<text t=" "/>
<dict dictionary="ModbusFormat.xml" ifEmpty="0" t="dataType"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0.0" t="Set1"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0.0" t="Set2"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0.0" t="tau"/>
</arg>
<arg>
<text t=" "/>
<npp/>
</arg>
<arg>
<switch default="0" swt="dataType">
<case def="1" val="ABxN"/>
<case def="1" val="BAxN"/>
<case def="1" val="UABxN"/>
<case def="1" val="UBAxN"/>
<case def="2" val="ABxR"/>
<case def="2" val="BAxR"/>
<case def="2" val="UABxR"/>
<case def="2" val="UBAxR"/>
<case def="3" val="ABCDEFGH"/>
</switch>
</arg>
</Function>
</Block>
<Block end="Конец сгенерированного кода" notGenTyps="WORD, ABCDEFGH" start="Начало сгенерированного кода AI_Processing">
<Function name="mb_AI_Processing">
<arg>
<switch default="" swt="dataType">
<case def="INT_TO_REAL(" val="ABxN"/>
<case def="INT_TO_REAL(" val="BAxN"/>
<case def="INT_TO_REAL(" val="ABxR"/>
<case def="INT_TO_REAL(" val="BAxR"/>
<case def="UINT_TO_REAL(" val="UABxN"/>
<case def="UINT_TO_REAL(" val="UBAxN"/>
<case def="UINT_TO_REAL(" val="UABxR"/>
<case def="UINT_TO_REAL(" val="UBAxR"/>
</switch>
<abonent/>
<text t="_AI_DRV."/>
<dbd t="TAG_NAME_PLC"/>
<switch default="" swt="dataType">
<case def=")" val="ABxN"/>
<case def=")" val="BAxN"/>
<case def=")" val="ABxR"/>
<case def=")" val="BAxR"/>
<case def=")" val="UABxN"/>
<case def=")" val="UBAxN"/>
<case def=")" val="UABxR"/>
<case def=")" val="UBAxR"/>
</switch>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AI_Settings."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AI_FromHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AI_ToHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
</Function>
</Block>
</File>
<!--		<File src="AI_Permit" target="_Algorithm">
<Block start="Начало сгенерированного кода AI_Permit" end="Конец сгенерированного кода" notGenTyps="WORD, ABCDEFGH">
<String>
<abonent/><text t="_AI_ToHMI."/><dbd t="TAG_NAME_PLC"/><text t=".manual := tmpPermit; //"/><dbd t="Наименование"/>
</String>
</Block>
<Block start="Начало сгенерированного кода AI_Alter" end="Конец сгенерированного кода" isGenTyps="ABCDEFGH">
<String>
<text t="tmpPermit := "/><abonent/><text t="_AI_DRV."/><dbd t="TAG_NAME_PLC"/><text t="; //"/><dbd t="Наименование"/>
</String>
</Block>
</File> -->
<File src="Simulate_mbAI">
<Block end="Конец сгенерированного кода" notGenTyps="WORD, ABCDEFGH" start="Начало сгенерированного кода 1">
<String>
<abonent/>
<text t="_AI_FromHMI."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".BTNmanualOn := c;  "/>
<abonent/>
<text t="_AI_FromHMI."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".BTNworkOn := not c; // "/>
<dbd t="Наименование"/>
</String>
</Block>
</File>
</GenCode>
<GenHW drvFile="_AI_DRV" globData="_AI_DRV"/>
</mb_AI>
<mb_AO Comment="Аналоговые выходы. Modbus: " excelSheetName="mb_AO">
<GenData>
<AO_DRV col="dataType" dictionary="ModbusFormat.xml" ifEmpty="REAL">
<globData name="AO_DRV">
<localData int="_Algorithm.int"/>
</globData>
<globData name="AO">
<localData int="_Algorithm.int"/>
</globData>
</AO_DRV>
<AO_FromHMI notGenTyps="WORD, ABCDEFGH" typeFile="T_AO_FromHMI.type">
<globData name="AO_FromHMI">
<localData int="_Algorithm.int"/>
</globData>
</AO_FromHMI>
<AO_ToHMI notGenTyps="WORD, ABCDEFGH" typeFile="T_AO_ToHMI.type">
<globData name="AO_ToHMI">
<localData int="_Algorithm.int"/>
</globData>
</AO_ToHMI>
<AO_Settings notGenTyps="WORD, ABCDEFGH" typeFile="T_AO_Settings.type">
<globData>
<localData int="_Algorithm.int" name="AO_Settings"/>
</globData>
</AO_Settings>
</GenData>
<EXEL info="R1C2">
<B nameColumnPos="Наименование"/>
<!--Ноды "Наименование" и "TAG_NAME_PLC" должны присутствовать в каждой ноде "EXEL"-->
<C childTable="SetPoints" cildCol="TAG_NAME_AnPar" nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/>
<D default="0.0" fRez="" nameColumnPos="Диапазон_мин" type="Number"/>
<E default="100.0" fRez="" nameColumnPos="Диапазон_макс" type="Number"/>
<F default="" nameColumnPos="Единица_измерения"/>
<G default="2" nameColumnPos="Точность" type="Int"/>
<H default="" nameColumnPos="Примечание"/>
<I default="" nameColumnPos="доп_инфо"/>
<J default="ABCD" nameColumnPos="dataType"/>
<K default="" nameColumnPos="Set1" type="Int"/>
<L default="" nameColumnPos="Set2" type="Int"/>
<M modbus="dataType" nameColumnPos="mbAddr" type="Int"/>
<N dictionary="SmallName.xml" nameColumnPos="SmallName" sourceCol="TAG_NAME_PLC"/>
</EXEL>
<GenCode>
<File src="mb_AO_CallAll" target="_Algorithm">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода AO_init">
<Function name="mb_AO_init">
<arg>
<abonent/>
<text t="_AO_Settings."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0" t="Диапазон_мин"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0" t="Диапазон_макс"/>
</arg>
<arg>
<text t=" "/>
<dict dictionary="ModbusFormat.xml" ifEmpty="0" t="dataType"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0" t="Set1"/>
</arg>
<arg>
<text t=" "/>
<dbd ifEmpty="0" t="Set2"/>
</arg>
<arg>
<text t=" "/>
<npp/>
</arg>
</Function>
</Block>
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода AO_Processing">
<Function name="mb_AO_Processing">
<arg>
<abonent/>
<text t="_AO."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AO_Settings."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AO_FromHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_AO_ToHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<text t="tmpReal"/>
</arg>
<arg>
<text t=" "/>
<text t="tmpInt"/>
</arg>
</Function>
<String>
<abonent/>
<text t="_AO_DRV."/>
<dbd t="TAG_NAME_PLC"/>
<text t=" := "/>
<switch default="tmpReal" swt="dataType">
<case def="tmpInt" val="ABxN"/>
<case def="tmpInt" val="BAxN"/>
<case def="tmpInt" val="ABxR"/>
<case def="tmpInt" val="BAxR"/>
</switch>
<text t="; //"/>
<dbd t="Наименование"/>
</String>
</Block>
</File>
<File src="AO_Permit" target="_Algorithm">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода AO_Permit">
<String>
<abonent/>
<text t="_AO_ToHMI."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".forsPermit := tmpPermit; //"/>
<dbd t="Наименование"/>
</String>
</Block>
</File>
</GenCode>
<GenHW drvFile="_AO_DRV" globData="_AO_DRV"/>
</mb_AO>
<mb_DI Comment="Дискретные входы. Modbus: " excelSheetName="mb_DI">
<GenData>
<DI_DRV Type="BOOL">
<globData name="DI_DRV">
<localData int="_Algorithm.int"/>
</globData>
<globData name="DI">
<localData int="_Algorithm.int"/>
</globData>
</DI_DRV>
<DI_FromHMI typeFile="T_DI_FromHMI.type">
<globData name="DI_FromHMI">
<localData int="_Algorithm.int"/>
</globData>
</DI_FromHMI>
<DI_ToHMI typeFile="T_DI_ToHMI.type">
<globData name="DI_ToHMI">
<localData int="_Algorithm.int"/>
</globData>
</DI_ToHMI>
</GenData>
<EXEL info="R1C2">
<B nameColumnPos="Наименование"/>
<!--Ноды "Наименование" и "TAG_NAME_PLC" должны присутствовать в каждой ноде "EXEL"-->
<C childTable="SetPoints" cildCol="TAG_NAME_AnPar" nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/>
<D default="" nameColumnPos="Примечание"/>
<E default="" nameColumnPos="доп_инфо"/>
<F modbus="bit" nameColumnPos="mbAddr"/>
</EXEL>
<GenCode>
<File src="mb_DI_CallAll" target="_Algorithm">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода DI_Processing">
<Function name="mb_DI_Processing">
<arg>
<abonent/>
<text t="_DI_DRV."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DI_FromHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DI_ToHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
</Function>
</Block>
</File>
<!--			<File src="DI_Permit" target="_Algorithm">
<Block start="Начало сгенерированного кода DI_Permit" end="Конец сгенерированного кода">
<String>
<abonent/><text t="_DI_ToHMI."/><dbd t="TAG_NAME_PLC"/><text t=".manual := tmpPermit; //"/><dbd t="Наименование"/>
</String>
</Block>
</File> -->
<File src="Simulate_mbDI">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода">
<String>
<abonent/>
<text t="_DI_FromHMI."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".BTNmanualOn := c;  "/>
<abonent/>
<text t="_DI_FromHMI."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".BTNworkOn := not c; // "/>
<dbd t="Наименование"/>
</String>
</Block>
</File>
</GenCode>
<GenHW drvFile="_DI_DRV" globData="_DI_DRV"/>
</mb_DI>
<mb_DO Comment="Дискретные выходы. Modbus: " excelSheetName="mb_DO">
<GenData>
<DO_DRV Type="BOOL">
<globData name="DO_DRV">
<localData int="_Algorithm.int"/>
</globData>
<globData name="DO">
<localData int="_Algorithm.int"/>
</globData>
</DO_DRV>
<DO_FromHMI typeFile="T_DO_FromHMI.type">
<globData name="DO_FromHMI">
<localData int="_Algorithm.int"/>
</globData>
</DO_FromHMI>
<DO_ToHMI typeFile="T_DO_ToHMI.type">
<globData name="DO_ToHMI">
<localData int="_Algorithm.int"/>
</globData>
</DO_ToHMI>
</GenData>
<EXEL info="R1C2">
<B nameColumnPos="Наименование"/>
<!--Ноды "Наименование" и "TAG_NAME_PLC" должны присутствовать в каждой ноде "EXEL"-->
<C childTable="SetPoints" cildCol="TAG_NAME_AnPar" nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/>
<D default="" nameColumnPos="Примечание"/>
<E default="" nameColumnPos="доп_инфо"/>
<F modbus="bit" nameColumnPos="mbAddr"/>
</EXEL>
<GenCode>
<File src="DO_CallAll" target="_Algorithm">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода DO_Processing">
<Function name="DO_Processing">
<arg>
<abonent/>
<text t="_DO."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DO_FromHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DO_ToHMI."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_DO_DRV."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
</Function>
</Block>
</File>
<File src="DO_Permit" target="_Algorithm">
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода DO_Permit">
<String>
<abonent/>
<text t="_DO_ToHMI."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".forsPermit := tmpPermit; //"/>
<dbd t="Наименование"/>
</String>
</Block>
</File>
</GenCode>
<GenHW drvFile="_DO_DRV" globData="_DO_DRV"/> <!--hwFile="_modbus.mb_cfg" intFile="_modbus.int"/-->
</mb_DO>
<!--  ++++++++++++++++++++++++++++++++++++++++++++ ТАБЛИЦА АЛАРМОВ ++++++++++++++++++++++++++++++++++++++++++++++++++ steam -->
<APS Comment="Аварино-предупредительная сигнализация" excelSheetName="APS">
<EXEL>
<B nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/> <!-- Алгоритмическое имя аларма-->
<C nameColumnPos="Наименование"/> <!--Русское название АПС-->
<D nameColumnPos="Условие_срабатывания_АПС"/> <!--Логическое выражение -->
<E default="0.0" nameColumnPos="Время_задержки" type="Number"/> <!--секунды-->
<F nameColumnPos="Status"/> <!--строка из набора возм. значений: АО сс, АО бс, ВО сс, ВО бс, Пожар, ПС, АС -->
</EXEL>
<GenData>	<!-- генерация типов АПС -->
<APS Type="BOOL">
<globData name="APS">
<localData int="_Algorithm.int"/>
</globData>
</APS>
<APS_Internal>
<globData>
<localData int="_Algorithm.int" name="APS_Internal"/>
</globData>
</APS_Internal>
</GenData>
<GenCode>
<File src="Call_APS" target="_Algorithm"> <!-- target="_Algorithm"> генерация блока вызовов обработчиков -->
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода APS_Processing">
<Function name="APS_Processing">
<arg>
<dbd t="Условие_срабатывания_АПС"/>
</arg>
<arg>
<text t=" "/>
<dbd t="Время_задержки"/>
</arg>
<arg>
<text t=" "/>
<text t="unlock"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_APS."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_APS_Internal."/>
<dbd t="TAG_NAME_PLC"/>
</arg>
<arg>
<text t=" "/>
<abonent/>
<text t="_FirstOutIndex"/>
</arg>
<arg>
<text t=" "/>
<text t="i"/>
</arg>
</Function>
</Block>
</File>
<File src="APS_Init" target="_Algorithm"> <!-- target="_Algorithm"> генерация функции инициализации -->
<Block end="Конец сгенерированного кода" start="Начало сгенерированного кода APS_Init">
<String>
<abonent/>
<text t="_APS_Internal."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".target := Alarms."/>
<switch default="" swt="Status">
<case def="AS" val="АС"/>
<case def="PS" val="ПС"/>
<case def="AOs" val="АО сс"/>
<case def="AOb" val="АО бс"/>
<case def="VOs" val="ВО сс"/>
<case def="VOb" val="ВО бс"/>
<case def="Fire" val="Пожар"/>
</switch>
<text t="; //"/>
<dbd t="Наименование"/>
</String>
</Block>
</File>
<File src="FirstOut.lua"> <!-- генерация lua таблицы имен алармов -->
<Block end="Конец таблицы" start="Начало таблицы">
<String> <!-- отдельной нодой обозначается разборка строки -->
<IF cond="Status" val="ПС">
<!-- пропускаем или пишем пустую строку если нашли ПС-->
<text t=""/>
<ELSE>
<IF cond="Status" val="АС"> <!-- пропускаем или пишем пустую строку если нашли АС-->
<text t=""/>
<ELSE>  <!-- в остальных случае формируем строку таблицы lua -->
<text t="'_APS."/>
<dbd t="TAG_NAME_PLC"/>
<text t="',  '"/>
<dbd t="Status"/>
<text t="',  -- "/>
<dbd t="Наименование"/>
</ELSE>
</IF>
</ELSE>
</IF>
</String>
</Block>
</File>
</GenCode>
</APS>
<!--  ++++++++++++++++++++++++++++++++++++++++++++ ТАБЛИЦА ТС ++++++++++++++++++++++++++++++++++++++++++++++++++ steam -->
<TS Comment="Технологические сообщения" excelSheetName="TS">
<EXEL>
<A nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/> <!-- Алгоритмическое имя аларма-->
<B nameColumnPos="Наименование"/> <!--Русское название АПС-->
<C nameColumnPos="Пейджер"/> <!--Признак вывода сообщения в пейджер -->
</EXEL>
<GenData>	<!-- генерация типов TС -->
<TS Type="BOOL">
<globData name="TS">
<localData int="_Algorithm.int"/>
</globData>
</TS>
</GenData>
<GenCode>
<File src="TechMessages.lua"> <!-- генерация lua таблицы имен алармов -->
<!--		<String start="Начало имени" end="Конец имени" >
<text t="Tag."/><abonent/><text t="tch= {"/>
</String-->
<Block end="Конец таблицы" start="Начало таблицы">
<String> <!-- отдельной нодой обозначается разборка строки -->
<IF cond="Пейджер" val="Да">
<!-- формируем строку таблицы lua если нашли Да-->
<text t="'_TS."/>
<dbd t="TAG_NAME_PLC"/>
<text t="',  -- "/>
<dbd t="Наименование"/>
<ELSE>
<text t=""/>
<!-- в остальных случаях пропускаем строку -->
</ELSE>
</IF>
</String>
</Block>
</File>
</GenCode>
</TS>
<!--  ++++++++++++++++++++++++++++++++++++++++++++ ТАБЛИЦА ХР ++++++++++++++++++++++++++++++++++++++++++++++++++ steam -->
<HR Comment="Условия холодного резерва" excelSheetName="HR">
<EXEL>
<A nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/> <!-- Алгоритмическое имя аларма-->
<B nameColumnPos="Условие_ХР"/>
<C nameColumnPos="Наименование"/> <!--Русское название АПС-->
</EXEL>
<GenData>	<!-- генерация типов ХР -->
<PPU_HR Type="BOOL">
<globData name="PPU_HR">
<localData int="_Algorithm.int"/>
</globData>
</PPU_HR>
</GenData>
<GenCode>
<File src="ReadyHR" target="_Algorithm"> <!-- генерация функции проверки ХР -->
<Block end="Конец кода" start="Начало кода">
<String>
<text t=" // "/>
<dbd t="Наименование"/>
</String>
<String>
<abonent/>
<text t="_PPU_HR."/>
<dbd t="TAG_NAME_PLC"/>
<text t=" := check and ("/>
<dbd t="Условие_ХР"/>
<text t="); ReadyHR := ReadyHR and not "/>
<abonent/>
<text t="_PPU_HR."/>
<dbd t="TAG_NAME_PLC"/>
</String>
</Block>
</File>
</GenCode>
</HR>
<!--  ++++++++++++++++++++++++++++++++++++++++++++ ТАБЛИЦА ГР ++++++++++++++++++++++++++++++++++++++++++++++++++ steam -->
<GR Comment="Условия горячего резерва" excelSheetName="GR">
<EXEL>
<A nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/> <!-- Алгоритмическое имя аларма-->
<B nameColumnPos="Условие_ГР"/>
<C nameColumnPos="Наименование"/> <!--Русское название АПС-->
</EXEL>
<GenData>	<!-- генерация типов ГР -->
<PPU_GR Type="BOOL">
<globData name="PPU_GR">
<localData int="_Algorithm.int"/>
</globData>
</PPU_GR>
</GenData>
<GenCode>
<File src="ReadyGR" target="_Algorithm"> <!-- генерация функции проверки ХР -->
<Block end="Конец кода" start="Начало кода">
<String>
<text t=" // "/>
<dbd t="Наименование"/>
</String>
<String>
<abonent/>
<text t="_PPU_GR."/>
<dbd t="TAG_NAME_PLC"/>
<text t=" := check and ("/>
<dbd t="Условие_ГР"/>
<text t="); ReadyGR := ReadyGR and not "/>
<abonent/>
<text t="_PPU_GR."/>
<dbd t="TAG_NAME_PLC"/>
</String>
</Block>
</File>
</GenCode>
</GR>
<!--  ++++++++++++++++++++++++++++++++++++++++++++ ТАБЛИЦА TUNE_FR ++++++++++++++++++++++++++++++++++++++++++++++++++ steam -->
<TuneFR Comment="Настройки топливного регулятора" excelSheetName="TuneFR">
<EXEL>
<A nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/> <!-- Алгоритмическое имя настройки-->
<B default="0.0" nameColumnPos="Значение" type="Number"/>
<!--Обязательный нода-->
<C default="0.0" nameColumnPos="Нижняя_граница" type="Number"/>
<!--Обязательный нода-->
<D default="0.0" nameColumnPos="Верхняя_граница" type="Number"/>
<!--Обязательный нода-->
<E nameColumnPos="Наименование"/>
<!--Обязательный нода-->
<F default="1" nameColumnPos="Точность" type="Int"/>
</EXEL>
<GenData>	<!-- генерация типа TUNE_FR -->
<Tune_FR Type="REAL">
<globData name="Tune_FR">
<localData int="_GT_4RM.int"/>
</globData>
</Tune_FR>
</GenData>
<GenCode>
<File instanceAbonent="" src="TuneInitFR" target="_GT_4RM"> <!-- генерация функции проверки ХР -->
<Block end="Конец кода" start="Начало кода">
<String>
<abonent/>
<text t="_Tune_FR."/>
<dbd t="TAG_NAME_PLC"/>
<text t=" := "/>
<dbd t="Значение"/>
<text t="; // "/>
<dbd t="Наименование"/>
</String>
</Block>
</File>
<File nonFunc="BasicFBType" src="B_TuneInit" target="C_HMI2.iec_hmi"> <!-- генерация блока инициализации настроек в ЧМИ -->
<Block end="Конец кода" start="Начало кода">
<String>
<text t="&#10;T[i]:= '"/>
<dbd t="Наименование"/>
<text t="';&#10;N[i]:= '"/>
<dbd t="TAG_NAME_PLC"/>
<text t="';&#10;L[i]:= REAL#"/>
<dbd t="Нижняя_граница"/>
<text t=";&#10;H[i]:= REAL#"/>
<dbd t="Верхняя_граница"/>
<text t=";&#10;F[i]:= "/>
<dbd t="Точность"/>
<text t=";&#10;i:= i+ UINT#1"/>
</String>
</Block>
</File>
</GenCode>
</TuneFR>
<!--  ++++++++++++++++++++++++++++++++++++++++++++ ТАБЛИЦА TUNE ++++++++++++++++++++++++++++++++++++++++++++++++++ steam -->
<Tune Comment="Настройки топливного регулятора" excelSheetName="Tune">
<EXEL>
<A nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/> <!-- Алгоритмическое имя настройки-->
<B default="0.0" nameColumnPos="Значение" type="Number"/>
<!--Обязательный нода-->
<C default="0.0" nameColumnPos="Нижняя_граница" type="Number"/>
<!--Обязательный нода-->
<D default="0.0" nameColumnPos="Верхняя_граница" type="Number"/>
<!--Обязательный нода-->
<E nameColumnPos="Наименование"/>
<!--Обязательный нода-->
<F default="1" nameColumnPos="Точность" type="Int"/>
</EXEL>
<GenData>	<!-- генерация типа TUNE_FR -->
<Tune Type="REAL">
<globData name="Tune">
<localData int="_Algorithm.int"/>
</globData>
</Tune>
</GenData>
<GenCode>
<File src="TuneInit" target="_Algorithm">
<Block end="Конец кода" start="Начало кода">
<String>
<abonent/>
<text t="_Tune."/>
<dbd t="TAG_NAME_PLC"/>
<text t=" := "/>
<dbd t="Значение"/>
<text t="; // "/>
<dbd t="Наименование"/>
</String>
</Block>
</File>
<File nonFunc="BasicFBType" src="B_TuneInit" target="C_HMI2.iec_hmi"> <!-- генерация блока инициализации настроек в ЧМИ -->
<Block end="Конец кода" start="Начало кода">
<String>
<text t="&#10;T[i]:= '"/>
<dbd t="Наименование"/>
<text t="';&#10;N[i]:= '"/>
<dbd t="TAG_NAME_PLC"/>
<text t="';&#10;L[i]:= REAL#"/>
<dbd t="Нижняя_граница"/>
<text t=";&#10;H[i]:= REAL#"/>
<dbd t="Верхняя_граница"/>
<text t=";&#10;F[i]:= "/>
<dbd t="Точность"/>
<text t=";&#10;i:= i+ UINT#1"/>
</String>
</Block>
</File>
</GenCode>
</Tune>
<!--  ++++++++++++++++++++++++++++++++++++++++++++ ТАБЛИЦА CURVE_FR ++++++++++++++++++++++++++++++++++++++++++++++++++ steam -->
<CurveFR Comment="Кривые топливного регулятора" excelSheetName="CurveFR">
<EXEL>
<A nameColumnPos="TAG_NAME_PLC" type="VarName" unical="true"/> <!-- Алгоритмическое имя настройки-->
<B default="0.0" nameColumnPos="Нижняя_граница_X" type="Number"/>
<!--Обязательный нода-->
<C default="0.0" nameColumnPos="Верхняя_граница_X" type="Number"/>
<!--Обязательный нода-->
<D default="0.0" nameColumnPos="Нижняя_граница_Y" type="Number"/>
<!--Обязательный нода-->
<E default="0.0" nameColumnPos="Верхняя_граница_Y" type="Number"/>
<!--Обязательный нода-->
<F nameColumnPos="Наименование"/>
<!--Обязательный нода-->
<G default="1" nameColumnPos="Точность_X" type="Int"/>
<H default="1" nameColumnPos="Точность_Y" type="Int"/>
</EXEL>
<GenData>	<!-- генерация типа CURVE_FR -->
<Curve_FR typeFile="T_Curve.type">
<globData name="Curve_FR">
<localData int="_GT_4RM.int"/>
</globData>
</Curve_FR>
</GenData>
<GenCode> <!-- генерация инициализации кривых в ЧМИ -->
<File nonFunc="BasicFBType" src="B_CurveInit" target="C_HMI2.iec_hmi">
<Block end="Конец кода" start="Начало кода">
<String>
<text t="&#10;T[i]:= '"/>
<dbd t="Наименование"/>
<text t="';&#10;N[i]:= '"/>
<dbd t="TAG_NAME_PLC"/>
<text t="';&#10;Lx[i]:= REAL#"/>
<dbd t="Нижняя_граница_X"/>
<text t=";&#10;Hx[i]:= REAL#"/>
<dbd t="Верхняя_граница_X"/>
<text t=";&#10;Ly[i]:= REAL#"/>
<dbd t="Нижняя_граница_Y"/>
<text t=";&#10;Hy[i]:= REAL#"/>
<dbd t="Верхняя_граница_Y"/>
<text t=";&#10;Fx[i]:= "/>
<dbd t="Точность_X"/>
<text t=";&#10;Fy[i]:= "/>
<dbd t="Точность_Y"/>
<text t=";&#10;i:= i+ UINT#1"/>
</String>
</Block>
</File>
</GenCode>
</CurveFR>
<!--  ++++++++++++++++++++++++++++++++++++++++++++ ТАБЛИЦА CURVE_FR_INIT ++++++++++++++++++++++++++++++++++++++++++++++++++ steam -->
<CurveFR_Init Comment="Инициализация кривых топливного регулятора" excelSheetName="CurveFR_Init">
<EXEL>
<A nameColumnPos="TAG_NAME_PLC" type="VarName"/> <!-- Алгоритмическое имя настройки-->
<B default="0" nameColumnPos="Смещение" type="Int"/>
<!--Обязательный нода, смещение в массиве-->
<C default="0.0" nameColumnPos="X" type="Number"/>
<!--Обязательный нода, аргумент хар-ки-->
<D default="0.0" nameColumnPos="Y" type="Number"/>
<!--Обязательный нода, значение хар-ки-->
<E default="" nameColumnPos="Кол-во_точек" type="Int"/>
<F default="" nameColumnPos="Наименование"/>
<!--Обязательный нода-->
</EXEL>
<GenCode>
<File src="CurveInitFR" target="_GT_4RM">
<Block end="Конец кода" start="Начало кода">
<String>
<IF cond="Смещение" val="0">
<!-- Если смещение нулевое, то в строку пишем значение кол-ва точек -->
<abonent/>
<text t="_Curve_FR."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".N := "/>
<dbd t="Кол-во_точек"/>
<text t="; // "/>
<dbd t="Наименование"/>
</IF>	 <!-- в остальных случаях ничего не пишем -->
</String>
<String>
<abonent/>
<text t="_Curve_FR."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".s["/>
<dbd t="Смещение"/>
<text t="].x := "/>
<dbd t="X"/>
<text t="; "/>
<abonent/>
<text t="_Curve_FR."/>
<dbd t="TAG_NAME_PLC"/>
<text t=".s["/>
<dbd t="Смещение"/>
<text t="].fx := "/>
<dbd t="Y"/>
</String>
</Block>
</File>
</GenCode>
</CurveFR_Init>
<newTable Comment="" excelSheetName="newTable">
<!-- дефолтная таблица,для создания новой таблицы -->
<EXEL>
<F default="" nameColumnPos="Наименование"/>
</EXEL>
</newTable>
<NEWTABLE Comment="тестовая таблица" excelSheetName="NEWTABLE">
<GenData>
<Mango-DRV typeFile="REAL">
<globData name="MANGO_R">
<localData int="ALG"/>
</globData>
</Mango-DRV>
</GenData>
<GenCode/>
</NEWTABLE>
</ConfigSignals>
